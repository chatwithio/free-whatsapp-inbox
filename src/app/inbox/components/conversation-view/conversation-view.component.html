<div class="conversation-view">
    <div class="conversation-view__messages">
        @if (messages.length > 0) {
        @for (message of messages; track message.id) {
        <div class="conversation-view__message" [ngClass]="message.sender">
            <div class="conversation-view__text" [innerHTML]="message.text | whatsappFormat">
            </div>
            <small class="conversation-view__date">
                {{ message.date | date:'shortTime' }}
            </small>
        </div>
        }
        <div #bottom></div>
        } @else {
        <div class="conversation-view__no-messages">
            No hay mensajes para esta conversaciÃ³n.
        </div>
        }
    </div>

    <div class="conversation-view__input-container">
        <input type="text" [(ngModel)]="newMessageText" placeholder="Escribe un mensaje..." [disabled]="isSending"
            (keydown.enter)="sendMessage()" aria-label="Campo para escribir mensaje" />
        <button type="button" (click)="sendMessage()" aria-label="Enviar mensaje" [disabled]="isSending">
            {{ isSending ? 'Enviando...' : 'Enviar' }}
        </button>
    </div>
</div>